{% extends 'core/base.html' %}

{% block title %}Cadastrar Viagem{% endblock %}

{% block content %}
<h2 class="mt-4">Cadastrar Nova Viagem</h2>
<form method="post" enctype="multipart/form-data" class="mt-3">
  {% csrf_token %}
  <div class="mb-3">
    <label for="{{ form.titulo.id_for_label }}" class="form-label">Título</label>
    {{ form.titulo }}
  </div>
  <div class="mb-3">
    <label for="{{ form.descricao.id_for_label }}" class="form-label">Descrição</label>
    {{ form.descricao }}
  </div>
  <div class="mb-3">
    <label for="{{ form.data_viagem.id_for_label }}" class="form-label">Data da Viagem</label>
    {{ form.data_viagem }}
  </div>
  <div class="mb-3">
    <label for="{{ form.foto.id_for_label }}" class="form-label">Foto</label>
    {{ form.foto }}
  </div>
  <button type="submit" class="btn btn-primary">Salvar</button>
  <a href="{% url 'photo_list' %}" class="btn btn-secondary">Cancelar</a>
</form>

<!-- Inclua jQuery UI para funcionalidade de autocomplete -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/ui-lightness/jquery-ui.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

<script>
  $(document).ready(function () {
    $("#id_titulo").autocomplete({
      source: "{% url 'autocomplete_nome' %}",
      minLength: 2, // Começa a buscar após 2 caracteres
      select: function (event, ui) {
        // Quando um item é selecionado
        $(this).val(ui.item.value);
        return false;
      }
    });
  });
</script>

{% endblock %}